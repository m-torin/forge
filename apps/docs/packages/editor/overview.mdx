---
title: NotionEditor Package - Overview
description:
  Complete overview of the NotionEditor package with embeddable components,
  build system, and deployment options
icon: "edit"
---

# NotionEditor Package - Overview

The `@repo/editor` package provides a comprehensive Notion-style rich text
editor with multiple deployment options, from embeddable standalone bundles to
full React/Next.js integration.

## ğŸš€ Quick Start

### External Usage (Clean API)

For external npm consumers, the package provides a clean API:

```tsx
import { Editor } from "@repo/editor";

function MyApp() {
  return (
    <Editor
      placeholder="Start writing..."
      onChange={(html) => console.log(html)}
    />
  );
}
```

### Internal Monorepo Usage

For internal monorepo applications, access the full component library:

```tsx
import { EmbeddableNotionEditor } from "@repo/editor/components/embeddable";
import { NotionEditor } from "@repo/editor/components";
import { useCollaborativeEditing } from "@repo/editor/hooks";
```

## ğŸ“¦ Distribution Formats

The package is built with multiple distribution formats for maximum
compatibility:

### 1. **Standalone HTML (IIFE)**

Perfect for direct HTML integration without dependencies:

```html
<script src="./embeddable-standalone.global.js"></script>
<script>
  const editor = new EmbeddableNotionEditor({
    container: document.getElementById("editor")
  });
</script>
```

**File:** `dist/standalone/embeddable-standalone.global.js`

- **Size:** ~1.6MB (includes React, TipTap, and all dependencies)
- **Format:** IIFE (Immediately Invoked Function Expression)
- **CSS:** Automatically injected
- **Dependencies:** None (all bundled)

### 2. **React Bundle**

Optimized for React applications:

```tsx
import { Editor } from "@repo/editor/react";
```

**Files:**

- `dist/react/react-bundle.mjs` (ESM)
- `dist/react/react-bundle.cjs` (CommonJS)
- `dist/react/react-bundle.d.ts` (TypeScript declarations)

### 3. **Next.js Bundle**

SSR-compatible bundle for Next.js:

```tsx
import { Editor } from "@repo/editor/nextjs";
```

**Files:**

- `dist/nextjs/nextjs-bundle.mjs` (ESM)
- `dist/nextjs/nextjs-bundle.cjs` (CommonJS)
- `dist/nextjs/nextjs-bundle.d.ts` (TypeScript declarations)

### 4. **Full Library (ESM + CJS)**

Complete library with all components and utilities:

```tsx
import { EmbeddableNotionEditor, NotionEditor } from "@repo/editor";
import { useCollaborativeEditing } from "@repo/editor/hooks";
import { createUploadHandler } from "@repo/editor/utils";
```

**Files:**

- `dist/index.mjs` (ESM)
- `dist/index.cjs` (CommonJS)
- `dist/index.d.ts` (TypeScript declarations)

## ğŸ—ï¸ Build System

### Node.js Requirements

- **Node.js:** >= 20.0.0
- **Package Manager:** pnpm (recommended), npm, or yarn
- **TypeScript:** >= 5.0.0

### Build Commands

```bash
# Build all formats
pnpm build

# Build with cleanup
pnpm build:clean

# Development build with watch mode
pnpm build:dev

# Build and run tests
pnpm build:test
```

### Build Outputs

The build process generates multiple optimized bundles:

```
dist/
â”œâ”€â”€ standalone/
â”‚   â”œâ”€â”€ embeddable-standalone.global.js      # IIFE bundle for HTML
â”‚   â”œâ”€â”€ embeddable-standalone.global.js.map  # Source map
â”‚   â””â”€â”€ embeddable-standalone.d.ts           # TypeScript declarations
â”œâ”€â”€ react/
â”‚   â”œâ”€â”€ react-bundle.mjs                     # React ESM bundle
â”‚   â”œâ”€â”€ react-bundle.cjs                     # React CJS bundle
â”‚   â””â”€â”€ react-bundle.d.ts                    # TypeScript declarations
â”œâ”€â”€ nextjs/
â”‚   â”œâ”€â”€ nextjs-bundle.mjs                    # Next.js ESM bundle
â”‚   â”œâ”€â”€ nextjs-bundle.cjs                    # Next.js CJS bundle
â”‚   â””â”€â”€ nextjs-bundle.d.ts                   # TypeScript declarations
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ components.mjs                       # Components ESM
â”‚   â”œâ”€â”€ components.cjs                       # Components CJS
â”‚   â””â”€â”€ components.d.ts                      # TypeScript declarations
â”œâ”€â”€ index.mjs                                # Main ESM entry
â”œâ”€â”€ index.cjs                                # Main CJS entry
â”œâ”€â”€ index.d.ts                               # Main TypeScript declarations
â””â”€â”€ *.css                                    # Extracted CSS files
```

## ğŸ§ª Testing

### Test Structure

The package includes comprehensive testing:

- **Unit Tests:** Component behavior and API testing
- **Integration Tests:** React Hook Form, state management integration
- **Build Tests:** Verification of build artifacts
- **Edge Case Tests:** Security, performance, and error handling

### Running Tests

```bash
# Run all tests
pnpm test

# Run with coverage
pnpm test:coverage

# Run build tests (requires built artifacts)
pnpm test:build

# Run tests in watch mode
pnpm test:watch

# Run tests with UI
pnpm test:ui
```

### Testing Commands in Turbo

The package uses Turborepo for optimized caching:

```bash
# Test with proper dependencies
turbo test --filter=@repo/editor

# Build and test
turbo build test:build --filter=@repo/editor

# Parallel testing
turbo test --parallel
```

## ğŸš€ Deployment & CI/CD

### GitHub Actions Workflow

The package includes automated CI/CD with GitHub Actions:

**Triggers:**

- Push to `main` branch
- Pull requests to `main`
- Changes in `packages/editor/**`

**Build Process:**

1. **Multi-Node Testing:** Node.js 20 & 22
2. **Build Verification:** All distribution formats
3. **Test Execution:** Unit, integration, and build tests
4. **Artifact Generation:** Packaged bundles for release
5. **GitHub Release:** Automated release with all artifacts

### Manual Deployment

```bash
# Prepare for deployment
pnpm build:clean
pnpm test:build
pnpm typecheck
pnpm lint

# Create package tarball
pnpm pack

# The tarball is ready for npm publishing
```

## ğŸ—ï¸ Architecture

### Package Structure

```
packages/editor/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ EmbeddableNotionEditor/    # Standalone embeddable editor
â”‚   â”‚   â”œâ”€â”€ NotionEditor/              # Full-featured editor
â”‚   â”‚   â””â”€â”€ index.ts                   # Component exports
â”‚   â”œâ”€â”€ hooks/                         # React hooks
â”‚   â”œâ”€â”€ utils/                         # Utility functions
â”‚   â”œâ”€â”€ types/                         # TypeScript definitions
â”‚   â”œâ”€â”€ testing/                       # Test utilities
â”‚   â”œâ”€â”€ external.ts                    # Clean external API
â”‚   â””â”€â”€ index.ts                       # Main exports
â”œâ”€â”€ __tests__/                         # Test suites
â”œâ”€â”€ examples/                          # Usage examples
â”œâ”€â”€ dist/                              # Build outputs (generated)
â”œâ”€â”€ tsup.config.ts                     # Build configuration
â”œâ”€â”€ turbo.json                         # Turborepo configuration
â””â”€â”€ package.json                       # Package configuration
```

### Key Design Principles

1. **Clean External API:** Simple `Editor` import for external consumers
2. **Internal Flexibility:** Full component access for monorepo apps
3. **Security First:** Built-in XSS protection, CSP support, file validation
4. **Performance Optimized:** Tree-shakeable exports, optimized bundles
5. **TypeScript Native:** Full type safety and IntelliSense support
6. **Framework Agnostic:** Works in React, Next.js, and vanilla JavaScript

## ğŸ“‹ Package.json Configuration

### Exports Map

The package.json includes a comprehensive exports map:

```json
{
  "exports": {
    ".": {
      "development": "./src/index.ts",
      "types": "./dist/index.d.ts",
      "import": "./dist/index.mjs",
      "require": "./dist/index.cjs"
    },
    "./react": {
      "types": "./dist/react/react-bundle.d.ts",
      "import": "./dist/react/react-bundle.mjs",
      "require": "./dist/react/react-bundle.cjs"
    },
    "./nextjs": {
      "types": "./dist/nextjs/nextjs-bundle.d.ts",
      "import": "./dist/nextjs/nextjs-bundle.mjs",
      "require": "./dist/nextjs/nextjs-bundle.cjs"
    },
    "./embeddable": {
      "browser": "./dist/standalone/embeddable-standalone.global.js",
      "types": "./dist/standalone/embeddable-standalone.d.ts"
    }
  }
}
```

### Browser Fields

```json
{
  "main": "./dist/index.cjs",
  "module": "./dist/index.mjs",
  "browser": "./dist/standalone/embeddable-standalone.global.js",
  "types": "./dist/index.d.ts"
}
```

## ğŸ”— Related Documentation

- [**Integration Guide**](./embeddable-editor-guide.mdx) - Detailed usage
  examples and configuration
- [**Browser Demo**](./browser-only-demo.mdx) - Live browser demonstrations
- [**TipTap Migration**](./tiptap-v3-migration.mdx) - Migration from TipTap v2
  to v3

## ğŸ“ˆ Performance Metrics

### Bundle Sizes

- **Standalone (IIFE):** ~1.6MB (includes all dependencies)
- **React Bundle:** ~40KB (external React dependency)
- **Next.js Bundle:** ~36KB (external Next.js dependencies)
- **Components Only:** ~285KB (embeddable component only)

### Load Times

- **Standalone Bundle:** ~200ms on 3G connection
- **React Bundle:** ~50ms (with React already loaded)
- **Next.js Bundle:** ~45ms (with Next.js already loaded)

### Feature Footprint

Each feature can be individually disabled to reduce bundle size:

- **Formatting:** +2KB
- **Lists:** +3KB
- **Tables:** +8KB
- **Code Blocks:** +15KB
- **Collaboration:** +25KB

## ğŸ¯ Roadmap

### Current Version Features

- âœ… Multiple distribution formats
- âœ… Comprehensive security features
- âœ… Full TypeScript support
- âœ… Automated CI/CD pipeline
- âœ… Extensive test coverage

### Upcoming Features

- ğŸ”„ Real-time collaboration improvements
- ğŸ”„ Advanced theming system
- ğŸ”„ Plugin architecture
- ğŸ”„ Mobile-first optimizations
- ğŸ”„ WebAssembly performance boosts

## ğŸ¤ Contributing

See the main repository documentation for contribution guidelines. The editor
package follows the same patterns as other packages in the monorepo.

## ğŸ“„ License

Part of the `@repo/editor` package. See the main repository license for details.
